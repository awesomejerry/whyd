# Design: Daily Summary

## Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Summary Section               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Header: ä»Šæ—¥å›é¡§ + é—œé–‰æŒ‰éˆ•            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Stats Cards:                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ç¸½æ•¸    â”‚ â”‚æœ€æ—©è¨˜éŒ„ â”‚ â”‚æœ€æ™šè¨˜éŒ„ â”‚   â”‚
â”‚  â”‚  12     â”‚ â”‚ 08:30   â”‚ â”‚ 22:15   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Tag Distribution:                      â”‚
â”‚  [å·¥ä½œ â–ˆâ–ˆâ–ˆâ–ˆ 40%]                        â”‚
â”‚  [å­¸ç¿’ â–ˆâ–ˆâ–ˆ 30%]                         â”‚
â”‚  [ç”Ÿæ´» â–ˆâ–ˆ 20%]                          â”‚
â”‚  [å¥åº· â–ˆ 10%]                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Highlight Section:                     â”‚
â”‚  ã€Œä»Šæ—¥æœ€é‡è¦çš„äº‹ã€                      â”‚
â”‚  [é¸æ“‡æˆ–é¡¯ç¤ºå·²æ¨™è¨˜çš„æˆå°±]               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Timeline Preview (Top 5)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow

1. **è³‡æ–™å–å¾—**ï¼šä½¿ç”¨ `Store.getTodayEntries()` å–å¾—ä»Šæ—¥æ‰€æœ‰è¨˜éŒ„
2. **çµ±è¨ˆè¨ˆç®—**ï¼š
   - ç¸½æ•¸ï¼šentries.length
   - æ¨™ç±¤åˆ†å¸ƒï¼šéæ­· entries.tags è¨ˆç®—æ¬¡æ•¸
   - æ™‚é–“åˆ†å¸ƒï¼šæ‰¾å‡º createdAt æœ€æ—©/æœ€æ™š
3. **é‡è¦æ¨™è¨˜**ï¼šä½¿ç”¨ localStorage å„²å­˜ `daily_summary_highlight_{date}`
4. **æ™šä¸Šæç¤º**ï¼šlocalStorage `daily_summary_prompted_{date}` è¨˜éŒ„ç•¶å¤©æ˜¯å¦å·²æç¤º

## UI Components

### 1. SummaryHeader
- æ¨™é¡Œï¼šã€Œä»Šæ—¥å›é¡§ã€
- é—œé–‰æŒ‰éˆ•ï¼šè¿”å›ä¸»é é¢

### 2. StatsCards
- ä¸‰å€‹çµ±è¨ˆå¡ç‰‡ä¸¦æ’é¡¯ç¤º
- ä½¿ç”¨ CSS Grid å¯¦ç¾éŸ¿æ‡‰å¼ä½ˆå±€

### 3. TagDistribution
- æ°´å¹³é€²åº¦æ¢é¡¯ç¤ºå„æ¨™ç±¤ä½”æ¯”
- é¡è‰²ä½¿ç”¨æ¨™ç±¤åŸæœ‰è‰²å½©

### 4. HighlightSelector
- é¡¯ç¤ºä»Šæ—¥æ‰€æœ‰æˆå°±åˆ—è¡¨
- å–®é¸æ©Ÿåˆ¶æ¨™è¨˜æœ€é‡è¦çš„äº‹
- æ¨™è¨˜å¾Œé¡¯ç¤ºçªå‡ºæ¨£å¼

### 5. TimelinePreview
- é¡¯ç¤ºä»Šæ—¥å‰ 5 ç­†è¨˜éŒ„çš„ç°¡åŒ–æ™‚é–“ç·š

## State Management

```javascript
DailySummary = {
    isOpen: false,
    highlightId: null,  // ä»Šæ—¥æ¨™è¨˜çš„æˆå°± ID
    promptedToday: false  // ç•¶å¤©æ˜¯å¦å·²æç¤º
}
```

## Event Triggers

1. **æ‰‹å‹•è§¸ç™¼**ï¼šé»æ“Šåº•éƒ¨ ğŸŒ™ æŒ‰éˆ•
2. **è‡ªå‹•æç¤º**ï¼šæ™šä¸Š 20:00-23:00 é–‹å•Ÿæ‡‰ç”¨æ™‚ï¼Œè‹¥ç•¶å¤©å°šæœªæç¤ºå‰‡è‡ªå‹•é¡¯ç¤º

## CSS Variables (éµå¾ªç¾æœ‰è¦ç¯„)

```css
--summary-bg: var(--surface);
--summary-card-bg: var(--bg);
--summary-border: var(--border);
--summary-text: var(--text);
--summary-muted: var(--text-muted);
```
